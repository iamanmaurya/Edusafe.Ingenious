<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduSafe - Smart Disaster Preparedness & SOS Alert System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        .hero-bg {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .sos-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .badge {
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
        }
        .modal {
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <i data-lucide="shield-check" class="w-5 h-5 text-white"></i>
                    </div>
                    <span class="text-xl font-bold text-gray-800">EduSafe</span>
                </div>
                <div class="hidden md:flex space-x-6">
                    <button onclick="showPage('home')" class="nav-btn text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md">Home</button>
                    <button onclick="showPage('education')" class="nav-btn text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md">Learn Safety</button>
                    <button onclick="showPage('quiz')" class="nav-btn text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md">Quiz</button>
                    <button onclick="showPage('sos')" class="nav-btn text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md">SOS Alert</button>
                    <button onclick="showPage('dashboard')" class="nav-btn text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md">Dashboard</button>
                </div>
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-gray-700">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <button onclick="showPage('home')" class="block px-3 py-2 text-gray-700 hover:text-blue-600">Home</button>
                <button onclick="showPage('education')" class="block px-3 py-2 text-gray-700 hover:text-blue-600">Learn Safety</button>
                <button onclick="showPage('quiz')" class="block px-3 py-2 text-gray-700 hover:text-blue-600">Quiz</button>
                <button onclick="showPage('sos')" class="block px-3 py-2 text-gray-700 hover:text-blue-600">SOS Alert</button>
                <button onclick="showPage('dashboard')" class="block px-3 py-2 text-gray-700 hover:text-blue-600">Dashboard</button>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="homePage" class="page">
        <!-- Hero Section -->
        <section class="hero-bg text-white py-20">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <div class="mb-8">
                    <img src="edusafe.png" class="w-64 h-56 mx-auto mb-6">
                </div>
                <h1 class="text-4xl md:text-6xl font-bold mb-6">EduSafe</h1>
                <p class="text-xl md:text-2xl mb-8 opacity-90">Smart Disaster Preparedness & SOS Alert System</p>
                <p class="text-lg mb-12 opacity-80 max-w-2xl mx-auto">Empowering schools and colleges with comprehensive disaster preparedness education and emergency response capabilities.</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="showPage('education')" class="bg-white text-blue-600 px-8 py-4 rounded-lg font-semibold hover:bg-gray-100 transition-colors flex items-center justify-center space-x-2">
                        <i data-lucide="book-open" class="w-5 h-5"></i>
                        <span>Learn Safety</span>
                    </button>
                    <button onclick="showPage('sos')" class="bg-red-600 text-white px-8 py-4 rounded-lg font-semibold hover:bg-red-700 transition-colors flex items-center justify-center space-x-2">
                        <i data-lucide="alert-triangle" class="w-5 h-5"></i>
                        <span>Send SOS</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-16 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">Why Choose EduSafe?</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="text-center p-6 rounded-lg bg-blue-50 card-hover">
                        <i data-lucide="graduation-cap" class="w-12 h-12 text-blue-600 mx-auto mb-4"></i>
                        <h3 class="text-xl font-semibold mb-3">Interactive Learning</h3>
                        <p class="text-gray-600">Comprehensive disaster preparedness education with quizzes and gamification.</p>
                    </div>
                    <div class="text-center p-6 rounded-lg bg-red-50 card-hover">
                        <i data-lucide="phone-call" class="w-12 h-12 text-red-600 mx-auto mb-4"></i>
                        <h3 class="text-xl font-semibold mb-3">Instant SOS Alerts</h3>
                        <p class="text-gray-600">One-click emergency alerts via SMS and email to authorities.</p>
                    </div>
                    <div class="text-center p-6 rounded-lg bg-green-50 card-hover">
                        <i data-lucide="bar-chart" class="w-12 h-12 text-green-600 mx-auto mb-4"></i>
                        <h3 class="text-xl font-semibold mb-3">Admin Dashboard</h3>
                        <p class="text-gray-600">Track alerts, manage students, and schedule emergency drills.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Education Page -->
    <div id="educationPage" class="page hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-800 mb-4">Disaster Preparedness Education</h1>
                <p class="text-xl text-gray-600">Learn how to stay safe during different types of disasters</p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Earthquake Card -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover cursor-pointer" onclick="openModal('earthquake')">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="zap" class="w-8 h-8 text-orange-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Earthquake</h3>
                        <p class="text-gray-600 mb-4">Learn earthquake safety protocols and emergency procedures</p>
                        <div class="flex justify-center space-x-2">
                            <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm">Drop</span>
                            <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm">Cover</span>
                            <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm">Hold</span>
                        </div>
                    </div>
                </div>

                <!-- Flood Card -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover cursor-pointer" onclick="openModal('flood')">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="cloud-rain" class="w-8 h-8 text-blue-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Flood</h3>
                        <p class="text-gray-600 mb-4">Understand flood risks and evacuation procedures</p>
                        <div class="flex justify-center space-x-2">
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">Evacuate</span>
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">Higher Ground</span>
                        </div>
                    </div>
                </div>

                <!-- Fire Card -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover cursor-pointer" onclick="openModal('fire')">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="flame" class="w-8 h-8 text-red-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Fire</h3>
                        <p class="text-gray-600 mb-4">Fire safety measures and evacuation routes</p>
                        <div class="flex justify-center space-x-2">
                            <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm">Exit</span>
                            <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm">Stay Low</span>
                        </div>
                    </div>
                </div>

                <!-- Pandemic Card -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover cursor-pointer" onclick="openModal('pandemic')">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="shield" class="w-8 h-8 text-green-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Pandemic</h3>
                        <p class="text-gray-600 mb-4">Health protocols and safety measures</p>
                        <div class="flex justify-center space-x-2">
                            <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Mask</span>
                            <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Distance</span>
                        </div>
                    </div>
                </div>

                <!-- Cyclone Card -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover cursor-pointer" onclick="openModal('cyclone')">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="wind" class="w-8 h-8 text-purple-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Cyclone</h3>
                        <p class="text-gray-600 mb-4">Cyclone preparedness and shelter protocols</p>
                        <div class="flex justify-center space-x-2">
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm">Shelter</span>
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm">Secure</span>
                        </div>
                    </div>
                </div>

                <!-- General Safety Card -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover cursor-pointer" onclick="openModal('general')">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="alert-circle" class="w-8 h-8 text-gray-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">General Safety</h3>
                        <p class="text-gray-600 mb-4">Basic emergency preparedness and first aid</p>
                        <div class="flex justify-center space-x-2">
                            <span class="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm">First Aid</span>
                            <span class="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm">Emergency Kit</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quiz Page -->
    <div id="quizPage" class="page hidden">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-800 mb-4">Safety Knowledge Quiz</h1>
                <p class="text-xl text-gray-600">Test your disaster preparedness knowledge</p>
                
                <!-- Score and Badges -->
                <div class="flex justify-center items-center space-x-6 mt-6">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-blue-600" id="currentScore">0</div>
                        <div class="text-sm text-gray-600">Score</div>
                    </div>
                    <div class="text-center">
                        <div class="badge text-white px-4 py-2 rounded-full font-semibold" id="currentBadge">Beginner</div>
                    </div>
                </div>
            </div>

            <!-- Quiz Container -->
            <div id="quizContainer" class="bg-white rounded-xl shadow-lg p-8">
                <div id="questionContainer">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-sm text-gray-500">Question <span id="questionNumber">1</span> of <span id="totalQuestions">5</span></span>
                            <div class="w-full bg-gray-200 rounded-full h-2 ml-4">
                                <div class="bg-blue-600 h-2 rounded-full transition-all duration-300" id="progressBar" style="width: 20%"></div>
                            </div>
                        </div>
                        <h3 class="text-xl font-semibold mb-6" id="questionText">What should you do first during an earthquake?</h3>
                    </div>
                    
                    <div class="space-y-3" id="optionsContainer">
                        <button class="quiz-option w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors" onclick="selectOption(0)">
                            <span class="font-medium">A.</span> Run outside immediately
                        </button>
                        <button class="quiz-option w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors" onclick="selectOption(1)">
                            <span class="font-medium">B.</span> Drop, Cover, and Hold On
                        </button>
                        <button class="quiz-option w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors" onclick="selectOption(2)">
                            <span class="font-medium">C.</span> Stand in a doorway
                        </button>
                        <button class="quiz-option w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors" onclick="selectOption(3)">
                            <span class="font-medium">D.</span> Call for help
                        </button>
                    </div>
                    
                    <div class="mt-8 flex justify-between">
                        <button onclick="previousQuestion()" id="prevBtn" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors disabled:opacity-50" disabled>Previous</button>
                        <button onclick="nextQuestion()" id="nextBtn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Next</button>
                    </div>
                </div>

                <!-- Quiz Results -->
                <div id="quizResults" class="hidden text-center">
                    <div class="mb-6">
                        <i data-lucide="trophy" class="w-16 h-16 text-yellow-500 mx-auto mb-4"></i>
                        <h3 class="text-2xl font-bold mb-2">Quiz Complete!</h3>
                        <p class="text-gray-600">Your final score: <span id="finalScore" class="font-bold text-blue-600">0/5</span></p>
                        <div class="mt-4">
                            <span class="badge text-white px-6 py-3 rounded-full font-semibold text-lg" id="finalBadge">Beginner</span>
                        </div>
                    </div>
                    <button onclick="restartQuiz()" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors">Take Quiz Again</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SOS Alert Page -->
    <div id="sosPage" class="page hidden">
        <div class="max-w-6xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8 lg:py-12">
            <div class="text-center mb-4 sm:mb-6 lg:mb-8">
                <h1 class="text-xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-2 sm:mb-4">Emergency SOS & Response System</h1>
                <p class="text-base sm:text-lg lg:text-xl text-gray-600">Send alerts and receive emergency responses</p>
                <div class="mt-3 sm:mt-4 p-2 sm:p-3 bg-blue-50 rounded-lg">
                    <p class="text-xs sm:text-sm text-blue-800">
                        <i data-lucide="phone" class="w-3 h-3 sm:w-4 sm:h-4 inline mr-1"></i>
                        Emergency Response: <strong>+91 9343272066</strong>
                    </p>
                    <p class="text-xs sm:text-sm text-blue-800 mt-1">
                        <i data-lucide="mail" class="w-3 h-3 sm:w-4 sm:h-4 inline mr-1"></i>
                        Alert Email: <strong>iaman.maurya18@gmail.com</strong>
                    </p>
                </div>
            </div>

            <!-- Two Column Layout for Desktop, Stacked for Mobile -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-8">
                
                <!-- Left Column: SOS Alert System -->
                <div class="bg-white rounded-xl shadow-lg p-3 sm:p-6 lg:p-8">
                    <h2 class="text-lg sm:text-xl lg:text-2xl font-bold text-center mb-4 sm:mb-6 text-red-700">Send Emergency Alert</h2>
                    
                    <!-- SOS Button -->
                    <div class="text-center mb-4 sm:mb-6">
                        <button id="sosButton" onclick="showSOSForm()" class="sos-pulse w-24 h-24 sm:w-32 sm:h-32 lg:w-40 lg:h-40 bg-red-600 hover:bg-red-700 text-white rounded-full text-sm sm:text-lg lg:text-xl font-bold shadow-2xl transition-colors flex items-center justify-center mx-auto">
                            <div>
                                <i data-lucide="alert-triangle" class="w-6 h-6 sm:w-8 sm:h-8 lg:w-10 lg:h-10 mx-auto mb-1"></i>
                                <div>SOS</div>
                                <div class="text-xs sm:text-sm font-normal">EMERGENCY</div>
                            </div>
                        </button>
                        <p class="text-gray-600 mt-2 sm:mt-3 text-xs sm:text-sm lg:text-base">Click to send emergency alert</p>
                    </div>

                    <!-- SOS Form -->
                    <div id="sosForm" class="hidden">
                        <h3 class="text-base sm:text-lg font-semibold mb-3 sm:mb-4 text-center">Emergency Alert Details</h3>
                        <form onsubmit="sendSOSAlert(event)" class="space-y-2 sm:space-y-3">
                            <div class="grid grid-cols-1 gap-2 sm:gap-3">
                                <div>
                                    <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                                    <input type="text" id="sosName" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-xs sm:text-sm" placeholder="Enter your full name">
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Phone Number *</label>
                                    <input type="tel" id="sosPhone" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-xs sm:text-sm" placeholder="Enter your phone number">
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Institute/School *</label>
                                    <input type="text" id="sosInstitute" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-xs sm:text-sm" placeholder="Enter your school/college name">
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Current Location *</label>
                                    <input type="text" id="sosLocation" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-xs sm:text-sm" placeholder="Building, room, or area details">
                                </div>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3">
                                    <div>
                                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Emergency Type *</label>
                                        <select id="sosType" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-xs sm:text-sm">
                                            <option value="">Select emergency type</option>
                                            <option value="fire">Fire Emergency</option>
                                            <option value="earthquake">Earthquake</option>
                                            <option value="flood">Flood/Water Emergency</option>
                                            <option value="medical">Medical Emergency</option>
                                            <option value="security">Security Threat</option>
                                            <option value="accident">Accident</option>
                                            <option value="general">Other Emergency</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Severity Level *</label>
                                        <select id="sosSeverity" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-xs sm:text-sm">
                                            <option value="">Select severity</option>
                                            <option value="critical">Critical - Life Threatening</option>
                                            <option value="high">High - Immediate Help Needed</option>
                                            <option value="medium">Medium - Urgent Assistance</option>
                                            <option value="low">Low - Non-Critical</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Describe the Emergency *</label>
                                    <textarea id="sosDetails" rows="2" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-xs sm:text-sm" placeholder="Provide details about what happened, number of people affected, injuries, etc."></textarea>
                                </div>
                            </div>
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 pt-2">
                                <button type="button" onclick="hideSOSForm()" class="w-full sm:flex-1 px-3 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors text-xs sm:text-sm">Cancel</button>
                                <button type="submit" class="w-full sm:flex-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold text-xs sm:text-sm">
                                    <i data-lucide="send" class="w-3 h-3 sm:w-4 sm:h-4 inline mr-1"></i>
                                    Send Alert
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Right Column: Response Collection System -->
                <div class="bg-white rounded-xl shadow-lg p-3 sm:p-6 lg:p-8">
                    <h2 class="text-lg sm:text-xl lg:text-2xl font-bold text-center mb-4 sm:mb-6 text-blue-700">Emergency Response Collection</h2>
                    
                    <!-- Response Form -->
                    <div class="mb-4 sm:mb-6">
                        <div class="bg-blue-50 p-3 sm:p-4 rounded-lg mb-3 sm:mb-4">
                            <p class="text-xs sm:text-sm text-blue-800 text-center">
                                <i data-lucide="info" class="w-3 h-3 sm:w-4 sm:h-4 inline mr-1"></i>
                                If you're facing a disaster, please fill this form to get help
                            </p>
                        </div>
                        
                        <form onsubmit="submitResponse(event)" class="space-y-2 sm:space-y-3">
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Your Full Name *</label>
                                <input type="text" id="responseName" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm" placeholder="Enter your full name">
                            </div>
                            
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Your Phone Number *</label>
                                <input type="tel" id="responsePhone" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm" placeholder="Enter your phone number">
                            </div>
                            
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Your Email Address *</label>
                                <input type="email" id="responseEmail" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm" placeholder="Enter your email address">
                            </div>
                            
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Current Location *</label>
                                <input type="text" id="responseLocation" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm" placeholder="Your current location">
                            </div>
                            
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3">
                                <div>
                                    <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Disaster Type *</label>
                                    <select id="responseDisasterType" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm">
                                        <option value="">Select disaster type</option>
                                        <option value="earthquake">Earthquake</option>
                                        <option value="flood">Flood</option>
                                        <option value="fire">Fire</option>
                                        <option value="cyclone">Cyclone/Storm</option>
                                        <option value="landslide">Landslide</option>
                                        <option value="accident">Accident</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Urgency Level *</label>
                                    <select id="responseUrgency" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm">
                                        <option value="">Select urgency</option>
                                        <option value="critical">Critical - Life at Risk</option>
                                        <option value="high">High - Need Immediate Help</option>
                                        <option value="medium">Medium - Need Assistance</option>
                                        <option value="low">Low - Safe but Need Support</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Number of People Affected *</label>
                                <input type="number" id="responsePeopleCount" required min="1" class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm" placeholder="How many people need help?">
                            </div>
                            
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Describe Your Situation *</label>
                                <textarea id="responseSituation" rows="2" required class="w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm" placeholder="Describe what happened, injuries, immediate needs, etc."></textarea>
                            </div>
                            
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Immediate Help Needed</label>
                                <div class="grid grid-cols-2 gap-1 sm:gap-2 text-xs">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="needMedical" class="mr-1 sm:mr-2">
                                        <span>Medical Aid</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="needFood" class="mr-1 sm:mr-2">
                                        <span>Food & Water</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="needShelter" class="mr-1 sm:mr-2">
                                        <span>Shelter</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="needRescue" class="mr-1 sm:mr-2">
                                        <span>Rescue</span>
                                    </label>
                                </div>
                            </div>
                            
                            <button type="submit" class="w-full px-3 py-2 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold text-xs sm:text-sm">
                                <i data-lucide="send" class="w-3 h-3 sm:w-4 sm:h-4 inline mr-1"></i>
                                Submit Help Request
                            </button>
                        </form>
                    </div>
                    
                    <!-- Response Success Message -->
                    <div id="responseSuccess" class="hidden">
                        <div class="text-center">
                            <div class="w-8 h-8 sm:w-12 sm:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-3">
                                <i data-lucide="check-circle" class="w-4 h-4 sm:w-6 sm:h-6 text-green-600"></i>
                            </div>
                            <h3 class="text-sm sm:text-lg font-semibold text-green-800 mb-2">Help Request Submitted!</h3>
                            <div class="bg-green-50 p-2 sm:p-3 rounded-lg mb-3 sm:mb-4">
                                <p class="text-xs sm:text-sm text-green-800 mb-1">
                                    <i data-lucide="phone" class="w-3 h-3 sm:w-4 sm:h-4 inline mr-1"></i>
                                    Response team will call: <strong id="responsePhoneDisplay"></strong>
                                </p>
                                <p class="text-xs sm:text-sm text-green-800 mb-1">
                                    <i data-lucide="mail" class="w-3 h-3 sm:w-4 sm:h-4 inline mr-1"></i>
                                    Updates sent to: <strong id="responseEmailDisplay"></strong>
                                </p>
                                <p class="text-xs sm:text-sm text-green-700">
                                    <i data-lucide="clock" class="w-3 h-3 sm:w-4 sm:h-4 inline mr-1"></i>
                                    Emergency coordinator: <strong>+91 9343272066</strong>
                                </p>
                            </div>
                            <button onclick="resetResponseForm()" class="w-full px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-xs sm:text-sm">Submit Another Request</button>
                        </div>
                    </div>
                </div>
            </div>

                <!-- Success Message -->
                <div id="sosSuccess" class="hidden text-center">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4">
                        <i data-lucide="check-circle" class="w-6 h-6 sm:w-8 sm:h-8 text-green-600"></i>
                    </div>
                    <h3 class="text-lg sm:text-xl font-semibold text-green-800 mb-2">Emergency Alert Sent Successfully!</h3>
                    <div class="bg-green-50 p-3 sm:p-4 rounded-lg mb-4 sm:mb-6">
                        <p class="text-sm sm:text-base text-green-800 mb-2">
                            <i data-lucide="phone" class="w-4 h-4 inline mr-1"></i>
                            SMS sent to: <strong>+91 9343272066</strong>
                        </p>
                        <p class="text-sm sm:text-base text-green-800 mb-2">
                            <i data-lucide="mail" class="w-4 h-4 inline mr-1"></i>
                            Email sent to: <strong>iaman.maurya18@gmail.com</strong>
                        </p>
                        <p class="text-sm sm:text-base text-green-700">
                            <i data-lucide="clock" class="w-4 h-4 inline mr-1"></i>
                            Response team will contact you shortly at your provided number.
                        </p>
                    </div>
                    <div class="space-y-2 sm:space-y-0 sm:space-x-4 sm:flex sm:justify-center">
                        <button onclick="resetSOS()" class="w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base">Send Another Alert</button>
                        <button onclick="showPage('home')" class="w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors text-sm sm:text-base">Back to Home</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboardPage" class="page hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <!-- Login Form -->
            <div id="loginForm" class="max-w-md mx-auto bg-white rounded-xl shadow-lg p-8">
                <div class="text-center mb-6">
                    <i data-lucide="lock" class="w-12 h-12 text-blue-600 mx-auto mb-4"></i>
                    <h2 class="text-2xl font-bold text-gray-800">Admin Login</h2>
                    <p class="text-gray-600">Access the dashboard</p>
                </div>
                <form onsubmit="adminLogin(event)">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                        <input type="text" id="adminUsername" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter username">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="adminPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter password">
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold">Login</button>
                </form>
                <p class="text-sm text-gray-500 mt-4 text-center">Demo credentials: admin / password123</p>
            </div>

            <!-- Dashboard Content -->
            <div id="dashboardContent" class="hidden">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-800">Admin Dashboard</h1>
                    <button onclick="adminLogout()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">Logout</button>
                </div>

                <!-- Stats Cards -->
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i data-lucide="users" class="w-6 h-6 text-blue-600"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600">Total Students</p>
                                <p class="text-2xl font-bold text-gray-800" data-stat="total-students">3</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                                <i data-lucide="alert-triangle" class="w-6 h-6 text-red-600"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600">Active Alerts</p>
                                <p class="text-2xl font-bold text-gray-800" id="activeAlerts">3</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <i data-lucide="check-circle" class="w-6 h-6 text-green-600"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600">Resolved Alerts</p>
                                <p class="text-2xl font-bold text-gray-800">28</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                                <i data-lucide="calendar" class="w-6 h-6 text-yellow-600"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600">Drills This Month</p>
                                <p class="text-2xl font-bold text-gray-800">2</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="bg-white rounded-lg shadow">
                    <div class="border-b border-gray-200">
                        <nav class="flex space-x-8 px-6">
                            <button onclick="showTab('alerts')" class="tab-btn py-4 px-1 border-b-2 border-blue-500 text-blue-600 font-medium">SOS Alerts</button>
                            <button onclick="showTab('students')" class="tab-btn py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700">Students</button>
                            <button onclick="showTab('drills')" class="tab-btn py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700">Mock Drills</button>
                        </nav>
                    </div>

                    <!-- Alerts Tab -->
                    <div id="alertsTab" class="tab-content p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold">Recent SOS Alerts</h3>
                            <button onclick="refreshAlerts()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Refresh</button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Time</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Student</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Institute</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Location</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Type</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="alertsTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Sample data will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Students Tab -->
                    <div id="studentsTab" class="tab-content p-6 hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold">Registered Students</h3>
                            <button onclick="showAddStudentForm()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">Add Student</button>
                        </div>

                        <!-- Add Student Form -->
                        <div id="addStudentForm" class="hidden bg-blue-50 rounded-lg p-6 mb-6">
                            <h4 class="text-lg font-semibold mb-4">Add New Student</h4>
                            <form onsubmit="addNewStudent(event)" class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                                    <input type="text" id="newStudentName" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Student ID *</label>
                                    <input type="text" id="newStudentId" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Grade *</label>
                                    <select id="newStudentGrade" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                        <option value="">Select Grade</option>
                                        <option value="Grade 9">Grade 9</option>
                                        <option value="Grade 10">Grade 10</option>
                                        <option value="Grade 11">Grade 11</option>
                                        <option value="Grade 12">Grade 12</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Section *</label>
                                    <select id="newStudentSection" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                        <option value="">Select Section</option>
                                        <option value="Science">Science</option>
                                        <option value="Arts">Arts</option>
                                        <option value="Commerce">Commerce</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number *</label>
                                    <input type="tel" id="newStudentPhone" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email Address *</label>
                                    <input type="email" id="newStudentEmail" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Emergency Contact *</label>
                                    <input type="tel" id="newStudentEmergency" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Address *</label>
                                    <input type="text" id="newStudentAddress" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                </div>
                                <div class="md:col-span-2 flex space-x-4">
                                    <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">Add Student</button>
                                    <button type="button" onclick="hideAddStudentForm()" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors">Cancel</button>
                                </div>
                            </form>
                        </div>

                        <!-- Students List -->
                        <div class="overflow-x-auto">
                            <table class="w-full bg-white rounded-lg shadow">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Student ID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Name</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Grade</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Section</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Phone</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Email</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="studentsTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Students will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Drills Tab -->
                    <div id="drillsTab" class="tab-content p-6 hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold">Mock Drills Schedule</h3>
                            <button onclick="showScheduleDrillForm()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">Schedule Drill</button>
                        </div>

                        <!-- Schedule Drill Form -->
                        <div id="scheduleDrillForm" class="hidden bg-purple-50 rounded-lg p-6 mb-6">
                            <h4 class="text-lg font-semibold mb-4">Schedule New Mock Drill</h4>
                            <form onsubmit="scheduleNewDrill(event)" class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Drill Title *</label>
                                    <input type="text" id="newDrillTitle" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Drill Type *</label>
                                    <select id="newDrillType" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                        <option value="">Select Drill Type</option>
                                        <option value="Fire Emergency">Fire Emergency</option>
                                        <option value="Earthquake">Earthquake</option>
                                        <option value="Flood">Flood</option>
                                        <option value="Cyclone">Cyclone</option>
                                        <option value="Medical Emergency">Medical Emergency</option>
                                        <option value="Security Threat">Security Threat</option>
                                        <option value="General Evacuation">General Evacuation</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Date *</label>
                                    <input type="date" id="newDrillDate" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Time *</label>
                                    <input type="time" id="newDrillTime" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Duration (minutes) *</label>
                                    <input type="number" id="newDrillDuration" required min="5" max="60" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Location *</label>
                                    <input type="text" id="newDrillLocation" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="e.g., All Buildings, Building A, etc.">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Expected Participants *</label>
                                    <input type="number" id="newDrillParticipants" required min="1" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                                    <textarea id="newDrillNotes" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="Additional instructions or notes"></textarea>
                                </div>
                                <div class="md:col-span-2 flex space-x-4">
                                    <button type="submit" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">Schedule Drill</button>
                                    <button type="button" onclick="hideScheduleDrillForm()" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors">Cancel</button>
                                </div>
                            </form>
                        </div>

                        <!-- Drills List -->
                        <div class="space-y-4" id="drillsList">
                            <!-- Drills will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Disaster Education -->
    <div id="disasterModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 id="modalTitle" class="text-2xl font-bold">Earthquake Safety</h2>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
                
                <div id="modalContent">
                    <!-- Content will be populated by JavaScript -->
                </div>
                
                <div class="mt-6 flex space-x-4">
                    <button onclick="startQuizFromModal()" class="flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold">Take Quiz</button>
                    <button onclick="closeModal()" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global variables
        let currentPage = 'home';
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let selectedAnswer = null;
        let sosAlerts = [
            {
                id: 1,
                time: '2024-03-20 14:30',
                student: 'John Smith',
                institute: 'Central High School',
                location: 'Building A, Room 201',
                type: 'Fire',
                status: 'Pending'
            },
            {
                id: 2,
                time: '2024-03-20 13:15',
                student: 'Sarah Johnson',
                institute: 'Tech College',
                location: 'Library, 2nd Floor',
                type: 'Medical Emergency',
                status: 'Resolved'
            },
            {
                id: 3,
                time: '2024-03-20 12:45',
                student: 'Mike Davis',
                institute: 'Science Academy',
                location: 'Cafeteria',
                type: 'General Emergency',
                status: 'Pending'
            }
        ];

        // Students data
        let students = [
            {
                id: 1,
                name: 'John Smith',
                grade: 'Grade 10',
                section: 'Science',
                studentId: 'STU001',
                phone: '+91 9876543210',
                email: 'john.smith@school.edu',
                emergencyContact: '+91 9876543211',
                address: '123 Main Street, City'
            },
            {
                id: 2,
                name: 'Sarah Johnson',
                grade: 'Grade 11',
                section: 'Arts',
                studentId: 'STU002',
                phone: '+91 9876543212',
                email: 'sarah.johnson@school.edu',
                emergencyContact: '+91 9876543213',
                address: '456 Oak Avenue, City'
            },
            {
                id: 3,
                name: 'Mike Davis',
                grade: 'Grade 12',
                section: 'Commerce',
                studentId: 'STU003',
                phone: '+91 9876543214',
                email: 'mike.davis@school.edu',
                emergencyContact: '+91 9876543215',
                address: '789 Pine Road, City'
            }
        ];

        // Mock drills data
        let mockDrills = [
            {
                id: 1,
                title: 'Fire Drill',
                type: 'Fire Emergency',
                date: '2024-03-15',
                time: '10:00 AM',
                duration: '15 minutes',
                location: 'All Buildings',
                participants: 1247,
                evacuationTime: '3 minutes 45 seconds',
                status: 'Completed',
                notes: 'Successful evacuation. All students reached assembly points safely.'
            },
            {
                id: 2,
                title: 'Earthquake Drill',
                type: 'Earthquake',
                date: '2024-03-25',
                time: '2:00 PM',
                duration: '20 minutes',
                location: 'All Buildings',
                participants: 1200,
                evacuationTime: 'TBD',
                status: 'Scheduled',
                notes: 'Drop, Cover, Hold practice followed by evacuation'
            },
            {
                id: 3,
                title: 'Flood Evacuation Drill',
                type: 'Flood',
                date: '2024-04-10',
                time: '11:00 AM',
                duration: '25 minutes',
                location: 'Ground Floor Buildings',
                participants: 800,
                evacuationTime: 'TBD',
                status: 'Scheduled',
                notes: 'Practice moving to higher floors and designated safe areas'
            }
        ];

        // Quiz questions
        const quizQuestions = [
            {
                question: "What should you do first during an earthquake?",
                options: ["Run outside immediately", "Drop, Cover, and Hold On", "Stand in a doorway", "Call for help"],
                correct: 1
            },
            {
                question: "During a fire emergency, you should:",
                options: ["Use elevators to evacuate quickly", "Stay low and crawl under smoke", "Open windows for fresh air", "Hide in a bathroom"],
                correct: 1
            },
            {
                question: "What is the safest place during a flood?",
                options: ["Basement", "Ground floor", "Higher ground", "Near windows"],
                correct: 2
            },
            {
                question: "In case of a pandemic, the most important measure is:",
                options: ["Wearing masks", "Social distancing", "Hand hygiene", "All of the above"],
                correct: 3
            },
            {
                question: "During a cyclone, you should:",
                options: ["Go outside to see the storm", "Stay in a sturdy shelter", "Drive to higher ground", "Open all windows"],
                correct: 1
            }
        ];

        // Disaster information
        const disasterInfo = {
            earthquake: {
                title: "Earthquake Safety",
                content: `
                    <div class="space-y-4">
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-orange-800 mb-2">Before an Earthquake:</h3>
                            <ul class="list-disc list-inside text-orange-700 space-y-1">
                                <li>Secure heavy furniture and appliances</li>
                                <li>Create an emergency kit</li>
                                <li>Identify safe spots in each room</li>
                                <li>Practice Drop, Cover, and Hold On</li>
                            </ul>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-red-800 mb-2">During an Earthquake:</h3>
                            <ul class="list-disc list-inside text-red-700 space-y-1">
                                <li><strong>DROP</strong> to hands and knees</li>
                                <li><strong>COVER</strong> your head and neck under a desk</li>
                                <li><strong>HOLD ON</strong> to your shelter and protect yourself</li>
                                <li>Stay where you are until shaking stops</li>
                            </ul>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-blue-800 mb-2">After an Earthquake:</h3>
                            <ul class="list-disc list-inside text-blue-700 space-y-1">
                                <li>Check for injuries and hazards</li>
                                <li>Exit building if it's damaged</li>
                                <li>Stay away from damaged structures</li>
                                <li>Listen for emergency information</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            flood: {
                title: "Flood Safety",
                content: `
                    <div class="space-y-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-blue-800 mb-2">Before a Flood:</h3>
                            <ul class="list-disc list-inside text-blue-700 space-y-1">
                                <li>Know your evacuation routes</li>
                                <li>Keep emergency supplies ready</li>
                                <li>Stay informed about weather conditions</li>
                                <li>Elevate utilities and furniture</li>
                            </ul>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-yellow-800 mb-2">During a Flood:</h3>
                            <ul class="list-disc list-inside text-yellow-700 space-y-1">
                                <li>Move to higher ground immediately</li>
                                <li>Avoid walking in moving water</li>
                                <li>Never drive through flooded roads</li>
                                <li>Stay away from electrical equipment</li>
                            </ul>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-green-800 mb-2">After a Flood:</h3>
                            <ul class="list-disc list-inside text-green-700 space-y-1">
                                <li>Wait for authorities to declare area safe</li>
                                <li>Avoid flood water - it may be contaminated</li>
                                <li>Check for structural damage</li>
                                <li>Document damage for insurance</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            fire: {
                title: "Fire Safety",
                content: `
                    <div class="space-y-4">
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-red-800 mb-2">Fire Prevention:</h3>
                            <ul class="list-disc list-inside text-red-700 space-y-1">
                                <li>Install smoke detectors</li>
                                <li>Keep fire extinguishers accessible</li>
                                <li>Plan and practice escape routes</li>
                                <li>Maintain electrical systems</li>
                            </ul>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-orange-800 mb-2">During a Fire:</h3>
                            <ul class="list-disc list-inside text-orange-700 space-y-1">
                                <li>Alert others and call emergency services</li>
                                <li>Stay low - crawl under smoke</li>
                                <li>Feel doors before opening</li>
                                <li>Use stairs, never elevators</li>
                                <li>Meet at designated assembly point</li>
                            </ul>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-gray-800 mb-2">If Trapped:</h3>
                            <ul class="list-disc list-inside text-gray-700 space-y-1">
                                <li>Close doors between you and fire</li>
                                <li>Seal cracks with wet cloth</li>
                                <li>Signal for help from windows</li>
                                <li>Stay low to avoid smoke</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            pandemic: {
                title: "Pandemic Safety",
                content: `
                    <div class="space-y-4">
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-green-800 mb-2">Personal Protection:</h3>
                            <ul class="list-disc list-inside text-green-700 space-y-1">
                                <li>Wear masks in public spaces</li>
                                <li>Maintain 6 feet social distance</li>
                                <li>Wash hands frequently for 20 seconds</li>
                                <li>Use hand sanitizer (60%+ alcohol)</li>
                            </ul>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-blue-800 mb-2">Health Monitoring:</h3>
                            <ul class="list-disc list-inside text-blue-700 space-y-1">
                                <li>Check temperature daily</li>
                                <li>Monitor for symptoms</li>
                                <li>Stay home when sick</li>
                                <li>Get vaccinated when available</li>
                            </ul>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-purple-800 mb-2">School Protocols:</h3>
                            <ul class="list-disc list-inside text-purple-700 space-y-1">
                                <li>Follow school health guidelines</li>
                                <li>Maintain classroom ventilation</li>
                                <li>Clean and disinfect surfaces</li>
                                <li>Report symptoms to authorities</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            cyclone: {
                title: "Cyclone Safety",
                content: `
                    <div class="space-y-4">
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-purple-800 mb-2">Before a Cyclone:</h3>
                            <ul class="list-disc list-inside text-purple-700 space-y-1">
                                <li>Monitor weather forecasts</li>
                                <li>Secure outdoor furniture and objects</li>
                                <li>Stock emergency supplies</li>
                                <li>Identify strongest room in building</li>
                            </ul>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-red-800 mb-2">During a Cyclone:</h3>
                            <ul class="list-disc list-inside text-red-700 space-y-1">
                                <li>Stay indoors in strongest part of building</li>
                                <li>Keep away from windows and doors</li>
                                <li>Listen to emergency radio</li>
                                <li>Do not go outside during eye of storm</li>
                            </ul>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h3 class="font-semibant text-yellow-800 mb-2">After a Cyclone:</h3>
                            <ul class="list-disc list-inside text-yellow-700 space-y-1">
                                <li>Wait for all-clear from authorities</li>
                                <li>Watch for flooding and debris</li>
                                <li>Avoid damaged power lines</li>
                                <li>Check on neighbors and community</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            general: {
                title: "General Emergency Preparedness",
                content: `
                    <div class="space-y-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-blue-800 mb-2">Emergency Kit Essentials:</h3>
                            <ul class="list-disc list-inside text-blue-700 space-y-1">
                                <li>Water (1 gallon per person per day)</li>
                                <li>Non-perishable food (3-day supply)</li>
                                <li>First aid kit and medications</li>
                                <li>Flashlight and extra batteries</li>
                                <li>Emergency contact information</li>
                            </ul>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-green-800 mb-2">Communication Plan:</h3>
                            <ul class="list-disc list-inside text-green-700 space-y-1">
                                <li>Identify emergency contacts</li>
                                <li>Choose meeting locations</li>
                                <li>Keep important documents safe</li>
                                <li>Know evacuation routes</li>
                            </ul>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-red-800 mb-2">Basic First Aid:</h3>
                            <ul class="list-disc list-inside text-red-700 space-y-1">
                                <li>Learn CPR and basic first aid</li>
                                <li>Know how to treat cuts and burns</li>
                                <li>Understand shock treatment</li>
                                <li>Practice emergency procedures</li>
                            </ul>
                        </div>
                    </div>
                `
            }
        };

        // Navigation functions
        function showPage(page) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            
            // Show selected page
            document.getElementById(page + 'Page').classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-blue-600', 'font-semibold');
                btn.classList.add('text-gray-700');
            });
            
            currentPage = page;
            
            // Hide mobile menu
            document.getElementById('mobileMenu').classList.add('hidden');
            
            // Initialize page-specific content
            if (page === 'quiz') {
                initializeQuiz();
            } else if (page === 'dashboard') {
                loadDashboard();
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        // Modal functions
        function openModal(disasterType) {
            const modal = document.getElementById('disasterModal');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            const info = disasterInfo[disasterType];
            title.textContent = info.title;
            content.innerHTML = info.content;
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('disasterModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function startQuizFromModal() {
            closeModal();
            showPage('quiz');
        }

        // Quiz functions
        function initializeQuiz() {
            currentQuestionIndex = 0;
            quizScore = 0;
            selectedAnswer = null;
            updateQuizDisplay();
            document.getElementById('quizResults').classList.add('hidden');
            document.getElementById('questionContainer').classList.remove('hidden');
        }

        function updateQuizDisplay() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionNumber').textContent = currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = quizQuestions.length;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'quiz-option w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors';
                button.onclick = () => selectOption(index);
                button.innerHTML = `<span class="font-medium">${String.fromCharCode(65 + index)}.</span> ${option}`;
                optionsContainer.appendChild(button);
            });
            
            // Update progress bar
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').textContent = currentQuestionIndex === quizQuestions.length - 1 ? 'Finish' : 'Next';
            
            selectedAnswer = null;
            updateOptionStyles();
        }

        function selectOption(index) {
            selectedAnswer = index;
            updateOptionStyles();
        }

        function updateOptionStyles() {
            const options = document.querySelectorAll('.quiz-option');
            options.forEach((option, index) => {
                if (index === selectedAnswer) {
                    option.classList.add('border-blue-500', 'bg-blue-50');
                    option.classList.remove('border-gray-200');
                } else {
                    option.classList.remove('border-blue-500', 'bg-blue-50');
                    option.classList.add('border-gray-200');
                }
            });
        }

        function nextQuestion() {
            if (selectedAnswer === null) {
                alert('Please select an answer before continuing.');
                return;
            }
            
            // Check if answer is correct
            if (selectedAnswer === quizQuestions[currentQuestionIndex].correct) {
                quizScore++;
            }
            
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                updateQuizDisplay();
            } else {
                showQuizResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                updateQuizDisplay();
            }
        }

        function showQuizResults() {
            document.getElementById('questionContainer').classList.add('hidden');
            document.getElementById('quizResults').classList.remove('hidden');
            
            document.getElementById('finalScore').textContent = `${quizScore}/${quizQuestions.length}`;
            document.getElementById('currentScore').textContent = quizScore;
            
            // Determine badge
            let badge = 'Beginner';
            if (quizScore >= 4) badge = 'Expert';
            else if (quizScore >= 3) badge = 'Prepared';
            
            document.getElementById('finalBadge').textContent = badge;
            document.getElementById('currentBadge').textContent = badge;
        }

        function restartQuiz() {
            initializeQuiz();
        }

        // SOS functions
        function showSOSForm() {
            document.getElementById('sosButton').style.display = 'none';
            document.getElementById('sosForm').classList.remove('hidden');
        }

        function hideSOSForm() {
            document.getElementById('sosButton').style.display = 'block';
            document.getElementById('sosForm').classList.add('hidden');
        }

        // Response Collection functions
        function submitResponse(event) {
            event.preventDefault();
            
            const name = document.getElementById('responseName').value;
            const phone = document.getElementById('responsePhone').value;
            const email = document.getElementById('responseEmail').value;
            const location = document.getElementById('responseLocation').value;
            const disasterType = document.getElementById('responseDisasterType').value;
            const urgency = document.getElementById('responseUrgency').value;
            const peopleCount = document.getElementById('responsePeopleCount').value;
            const situation = document.getElementById('responseSituation').value;
            
            // Get selected help needs
            const helpNeeds = [];
            if (document.getElementById('needMedical').checked) helpNeeds.push('Medical Aid');
            if (document.getElementById('needFood').checked) helpNeeds.push('Food & Water');
            if (document.getElementById('needShelter').checked) helpNeeds.push('Shelter');
            if (document.getElementById('needRescue').checked) helpNeeds.push('Rescue');
            
            // Create response record
            const responseData = {
                id: Date.now(),
                timestamp: new Date().toLocaleString(),
                name: name,
                phone: phone,
                email: email,
                location: location,
                disasterType: disasterType.charAt(0).toUpperCase() + disasterType.slice(1),
                urgency: urgency.charAt(0).toUpperCase() + urgency.slice(1),
                peopleCount: peopleCount,
                situation: situation,
                helpNeeds: helpNeeds,
                status: 'Received'
            };
            
            // Create detailed response message for emergency coordinator
            const coordinatorMessage = ` DISASTER RESPONSE REQUEST - ${urgency.toUpperCase()} 

VICTIM INFORMATION:
 Name: ${name}
 Phone: ${phone}
 Email: ${email}
 Location: ${location}

DISASTER DETAILS:
 Type: ${disasterType.toUpperCase()}
 Urgency: ${urgency.toUpperCase()}
 People Affected: ${peopleCount}
 Time Reported: ${responseData.timestamp}

SITUATION DESCRIPTION:
${situation}

IMMEDIATE HELP NEEDED:
${helpNeeds.length > 0 ? helpNeeds.join(', ') : 'Not specified'}

RESPONSE ACTIONS REQUIRED:
1. Contact victim immediately at ${phone}
2. Send email updates to ${email}
3. Dispatch appropriate emergency services
4. Coordinate rescue/relief operations
5. Provide regular status updates

This person is facing a disaster and needs immediate assistance!
Emergency Coordinator: +91 9343272066`;

            const emailToCoordinator = {
                subject: ` URGENT: ${urgency.toUpperCase()} Disaster Response - ${name} needs help`,
                body: coordinatorMessage
            };
            
            // Simulate sending to emergency coordinator
            console.log('Disaster Response Request:', responseData);
            console.log('SMS to Emergency Coordinator (+91 9343272066):', coordinatorMessage);
            console.log('Email to Emergency Coordinator (iaman.maurya18@gmail.com):', emailToCoordinator);
            
            // Show success message with victim's contact details
            document.getElementById('responsePhoneDisplay').textContent = phone;
            document.getElementById('responseEmailDisplay').textContent = email;
            
            // Hide form and show success
            document.querySelector('form[onsubmit="submitResponse(event)"]').style.display = 'none';
            document.getElementById('responseSuccess').classList.remove('hidden');
            
            // Re-initialize icons
            setTimeout(() => {
                lucide.createIcons();
            }, 100);
        }

        function resetResponseForm() {
            // Reset all form fields
            document.getElementById('responseName').value = '';
            document.getElementById('responsePhone').value = '';
            document.getElementById('responseEmail').value = '';
            document.getElementById('responseLocation').value = '';
            document.getElementById('responseDisasterType').value = '';
            document.getElementById('responseUrgency').value = '';
            document.getElementById('responsePeopleCount').value = '';
            document.getElementById('responseSituation').value = '';
            
            // Reset checkboxes
            document.getElementById('needMedical').checked = false;
            document.getElementById('needFood').checked = false;
            document.getElementById('needShelter').checked = false;
            document.getElementById('needRescue').checked = false;
            
            // Show form and hide success message
            document.querySelector('form[onsubmit="submitResponse(event)"]').style.display = 'block';
            document.getElementById('responseSuccess').classList.add('hidden');
        }

        function sendSOSAlert(event) {
            event.preventDefault();
            
            const name = document.getElementById('sosName').value;
            const phone = document.getElementById('sosPhone').value;
            const institute = document.getElementById('sosInstitute').value;
            const location = document.getElementById('sosLocation').value;
            const type = document.getElementById('sosType').value;
            const severity = document.getElementById('sosSeverity').value;
            const details = document.getElementById('sosDetails').value;
            
            // Create new alert
            const newAlert = {
                id: sosAlerts.length + 1,
                time: new Date().toLocaleString(),
                student: name,
                phone: phone,
                institute: institute,
                location: location,
                type: type.charAt(0).toUpperCase() + type.slice(1),
                severity: severity.charAt(0).toUpperCase() + severity.slice(1),
                details: details,
                status: 'Pending'
            };
            
            sosAlerts.unshift(newAlert);
            
            // Update dashboard stats if admin is logged in
            if (!document.getElementById('dashboardContent').classList.contains('hidden')) {
                updateDashboardStats();
            }
            
            // Create detailed emergency message
            const smsMessage = ` EMERGENCY ALERT - ${severity.toUpperCase()} 
From: ${name}
Phone: ${phone}
Institute: ${institute}
Location: ${location}
Emergency: ${type.toUpperCase()}
Severity: ${severity.toUpperCase()}
Details: ${details}
Time: ${newAlert.time}

IMMEDIATE RESPONSE REQUIRED!`;

            const emailMessage = {
                subject: ` CRITICAL: ${severity.toUpperCase()} Emergency Alert - ${name} at ${institute}`,
                body: `EMERGENCY ALERT DETAILS
========================

REPORTER INFORMATION:
 Name: ${name}
 Phone: ${phone}
 Institute: ${institute}
 Location: ${location}

EMERGENCY DETAILS:
 Type: ${type.toUpperCase()}
 Severity Level: ${severity.toUpperCase()}
 Time Reported: ${newAlert.time}

SITUATION DESCRIPTION:
${details}

RESPONSE ACTIONS REQUIRED:
1. Contact reporter immediately at ${phone}
2. Dispatch appropriate emergency services
3. Notify institute authorities at ${institute}
4. Coordinate with local emergency response teams

This is an automated emergency alert from the EduSafe system.
Please respond immediately to assist with this emergency situation.

Emergency Response Contact: +91 9343272066
Alert System Email: iaman.maurya18@gmail.com`
            };
            
            // Simulate sending SMS and email (in real app, this would call actual APIs)
            console.log('Sending SOS Alert:', newAlert);
            console.log('SMS to +91 9343272066:', smsMessage);
            console.log('Email to iaman.maurya18@gmail.com:', emailMessage);
            
            // Show success message
            document.getElementById('sosForm').classList.add('hidden');
            document.getElementById('sosSuccess').classList.remove('hidden');
            
            // Reset form
            document.getElementById('sosName').value = '';
            document.getElementById('sosPhone').value = '';
            document.getElementById('sosInstitute').value = '';
            document.getElementById('sosLocation').value = '';
            document.getElementById('sosType').value = '';
            document.getElementById('sosSeverity').value = '';
            document.getElementById('sosDetails').value = '';
            
            // Re-initialize icons for the success message
            setTimeout(() => {
                lucide.createIcons();
            }, 100);
        }

        function resetSOS() {
            document.getElementById('sosSuccess').classList.add('hidden');
            document.getElementById('sosButton').style.display = 'block';
        }

        // Dashboard functions
        function loadDashboard() {
            // Show login form by default
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('dashboardContent').classList.add('hidden');
        }

        function updateDashboardStats() {
            // Update total students
            document.getElementById('totalStudents').textContent = students.length;
            
            // Update active alerts
            const activeAlertsCount = sosAlerts.filter(alert => alert.status === 'Pending').length;
            document.getElementById('activeAlerts').textContent = activeAlertsCount;
            
            // Update resolved alerts
            const resolvedAlertsCount = sosAlerts.filter(alert => alert.status === 'Resolved').length;
            document.getElementById('resolvedAlerts').textContent = resolvedAlertsCount;
            
            // Update drills this month (count all drills for demo)
            document.getElementById('drillsThisMonth').textContent = mockDrills.length;
        }

        function adminLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            
            // Simple demo authentication
            if (username === 'admin' && password === 'password123') {
                document.getElementById('loginForm').classList.add('hidden');
                document.getElementById('dashboardContent').classList.remove('hidden');
                loadAlertsTable();
                loadStudentsTable();
                loadDrillsList();
                updateDashboardStats();
            } else {
                alert('Invalid credentials. Use admin/password123 for demo.');
            }
        }

        function adminLogout() {
            document.getElementById('dashboardContent').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('adminUsername').value = '';
            document.getElementById('adminPassword').value = '';
        }

        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            event.target.classList.add('border-blue-500', 'text-blue-600');
            event.target.classList.remove('border-transparent', 'text-gray-500');
        }

        function loadAlertsTable() {
            const tbody = document.getElementById('alertsTableBody');
            tbody.innerHTML = '';
            
            sosAlerts.forEach(alert => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${alert.time}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${alert.student}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${alert.institute}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${alert.location}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${alert.type}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${alert.status === 'Pending' ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}">
                            ${alert.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        ${alert.status === 'Pending' ? 
                            `<button onclick="resolveAlert(${alert.id})" class="text-green-600 hover:text-green-900">Resolve</button>` : 
                            '<span class="text-gray-400">Resolved</span>'
                        }
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Update dashboard stats
            updateDashboardStats();
        }

        function resolveAlert(alertId) {
            const alert = sosAlerts.find(a => a.id === alertId);
            if (alert) {
                alert.status = 'Resolved';
                loadAlertsTable();
                updateDashboardStats();
            }
        }

        function refreshAlerts() {
            loadAlertsTable();
        }

        // Student Management Functions
        function showAddStudentForm() {
            document.getElementById('addStudentForm').classList.remove('hidden');
        }

        function hideAddStudentForm() {
            document.getElementById('addStudentForm').classList.add('hidden');
            // Reset form
            document.getElementById('newStudentName').value = '';
            document.getElementById('newStudentId').value = '';
            document.getElementById('newStudentGrade').value = '';
            document.getElementById('newStudentSection').value = '';
            document.getElementById('newStudentPhone').value = '';
            document.getElementById('newStudentEmail').value = '';
            document.getElementById('newStudentEmergency').value = '';
            document.getElementById('newStudentAddress').value = '';
        }

        function addNewStudent(event) {
            event.preventDefault();
            
            const newStudent = {
                id: students.length + 1,
                name: document.getElementById('newStudentName').value,
                studentId: document.getElementById('newStudentId').value,
                grade: document.getElementById('newStudentGrade').value,
                section: document.getElementById('newStudentSection').value,
                phone: document.getElementById('newStudentPhone').value,
                email: document.getElementById('newStudentEmail').value,
                emergencyContact: document.getElementById('newStudentEmergency').value,
                address: document.getElementById('newStudentAddress').value
            };
            
            // Check if student ID already exists
            if (students.some(student => student.studentId === newStudent.studentId)) {
                alert('Student ID already exists. Please use a different ID.');
                return;
            }
            
            students.push(newStudent);
            loadStudentsTable();
            hideAddStudentForm();
            updateDashboardStats();
            
            alert('Student added successfully!');
        }

        function loadStudentsTable() {
            const tbody = document.getElementById('studentsTableBody');
            tbody.innerHTML = '';
            
            students.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${student.studentId}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${student.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${student.grade}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${student.section}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${student.phone}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${student.email}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <button onclick="viewStudentDetails(${student.id})" class="text-blue-600 hover:text-blue-900 mr-3">View Details</button>
                        <button onclick="deleteStudent(${student.id})" class="text-red-600 hover:text-red-900">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function viewStudentDetails(studentId) {
            const student = students.find(s => s.id === studentId);
            if (student) {
                alert(`Student Details:
Name: ${student.name}
ID: ${student.studentId}
Grade: ${student.grade} - ${student.section}
Phone: ${student.phone}
Email: ${student.email}
Emergency Contact: ${student.emergencyContact}
Address: ${student.address}`);
            }
        }

        function deleteStudent(studentId) {
            if (confirm('Are you sure you want to delete this student?')) {
                const index = students.findIndex(s => s.id === studentId);
                if (index > -1) {
                    students.splice(index, 1);
                    loadStudentsTable();
                    updateDashboardStats();
                    alert('Student deleted successfully!');
                }
            }
        }

        // Mock Drill Management Functions
        function showScheduleDrillForm() {
            document.getElementById('scheduleDrillForm').classList.remove('hidden');
            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('newDrillDate').min = today;
        }

        function hideScheduleDrillForm() {
            document.getElementById('scheduleDrillForm').classList.add('hidden');
            // Reset form
            document.getElementById('newDrillTitle').value = '';
            document.getElementById('newDrillType').value = '';
            document.getElementById('newDrillDate').value = '';
            document.getElementById('newDrillTime').value = '';
            document.getElementById('newDrillDuration').value = '';
            document.getElementById('newDrillLocation').value = '';
            document.getElementById('newDrillParticipants').value = '';
            document.getElementById('newDrillNotes').value = '';
        }

        function scheduleNewDrill(event) {
            event.preventDefault();
            
            const date = document.getElementById('newDrillDate').value;
            const time = document.getElementById('newDrillTime').value;
            const duration = document.getElementById('newDrillDuration').value;
            
            // Convert time to 12-hour format
            const timeObj = new Date(`2000-01-01T${time}`);
            const formattedTime = timeObj.toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit', 
                hour12: true 
            });
            
            const newDrill = {
                id: mockDrills.length + 1,
                title: document.getElementById('newDrillTitle').value,
                type: document.getElementById('newDrillType').value,
                date: date,
                time: formattedTime,
                duration: `${duration} minutes`,
                location: document.getElementById('newDrillLocation').value,
                participants: parseInt(document.getElementById('newDrillParticipants').value),
                evacuationTime: 'TBD',
                status: 'Scheduled',
                notes: document.getElementById('newDrillNotes').value || 'No additional notes'
            };
            
            mockDrills.push(newDrill);
            loadDrillsList();
            hideScheduleDrillForm();
            updateDashboardStats();
            
            alert('Mock drill scheduled successfully!');
        }

        function loadDrillsList() {
            const drillsList = document.getElementById('drillsList');
            drillsList.innerHTML = '';
            
            mockDrills.forEach(drill => {
                const statusColor = drill.status === 'Completed' ? 'green' : 
                                  drill.status === 'Scheduled' ? 'blue' : 'yellow';
                
                const drillCard = document.createElement('div');
                drillCard.className = `bg-${statusColor}-50 border border-${statusColor}-200 rounded-lg p-4`;
                drillCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h4 class="font-semibold text-${statusColor}-800 mb-2">${drill.title}</h4>
                            <div class="grid md:grid-cols-2 gap-2 text-sm text-${statusColor}-700">
                                <p><strong>Type:</strong> ${drill.type}</p>
                                <p><strong>Date:</strong> ${drill.date}</p>
                                <p><strong>Time:</strong> ${drill.time}</p>
                                <p><strong>Duration:</strong> ${drill.duration}</p>
                                <p><strong>Location:</strong> ${drill.location}</p>
                                <p><strong>Participants:</strong> ${drill.participants}</p>
                                ${drill.evacuationTime !== 'TBD' ? `<p><strong>Evacuation Time:</strong> ${drill.evacuationTime}</p>` : ''}
                            </div>
                            <p class="text-sm text-${statusColor}-600 mt-2"><strong>Notes:</strong> ${drill.notes}</p>
                        </div>
                        <div class="flex flex-col items-end space-y-2">
                            <span class="px-3 py-1 bg-${statusColor}-100 text-${statusColor}-800 rounded-full text-sm font-medium">${drill.status}</span>
                            <div class="flex space-x-2">
                                <button onclick="viewDrillDetails(${drill.id})" class="text-blue-600 hover:text-blue-800 text-sm">View Details</button>
                                ${drill.status === 'Scheduled' ? 
                                    `<button onclick="completeDrill(${drill.id})" class="text-green-600 hover:text-green-800 text-sm">Complete</button>
                                     <button onclick="cancelDrill(${drill.id})" class="text-red-600 hover:text-red-800 text-sm">Cancel</button>` : 
                                    drill.status === 'Completed' ? 
                                    `<span class="text-gray-500 text-sm">Completed</span>` :
                                    `<span class="text-red-500 text-sm">Cancelled</span>`
                                }
                            </div>
                        </div>
                    </div>
                `;
                drillsList.appendChild(drillCard);
            });
        }

        function completeDrill(drillId) {
            const evacuationTime = prompt('Enter evacuation time (e.g., "4 minutes 30 seconds"):');
            if (evacuationTime) {
                const drill = mockDrills.find(d => d.id === drillId);
                if (drill) {
                    drill.status = 'Completed';
                    drill.evacuationTime = evacuationTime;
                    loadDrillsList();
                    updateDashboardStats();
                    alert('Drill marked as completed!');
                }
            }
        }

        function cancelDrill(drillId) {
            if (confirm('Are you sure you want to cancel this drill?')) {
                const drill = mockDrills.find(d => d.id === drillId);
                if (drill) {
                    drill.status = 'Cancelled';
                    loadDrillsList();
                    updateDashboardStats();
                    alert('Drill cancelled successfully!');
                }
            }
        }

        function viewDrillDetails(drillId) {
            const drill = mockDrills.find(d => d.id === drillId);
            if (drill) {
                alert(`Drill Details:
Title: ${drill.title}
Type: ${drill.type}
Date: ${drill.date}
Time: ${drill.time}
Duration: ${drill.duration}
Location: ${drill.location}
Participants: ${drill.participants}
Evacuation Time: ${drill.evacuationTime}
Status: ${drill.status}
Notes: ${drill.notes}`);
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            showPage('home');
        });

        // Close modal when clicking outside
        document.getElementById('disasterModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e9ce677209b7e5',t:'MTc1Nzc4OTE3NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
